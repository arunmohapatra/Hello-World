import java.io.*;
import java.math.BigInteger;
import java.util.*;

public class FreshIngredientCounter {

    public static void main(String[] args) {

        String filePath = "I:\\input.txt";   // <-- your file location

        List<BigInteger[]> freshRanges = new ArrayList<>();
        List<BigInteger> ingredientIds = new ArrayList<>();

        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {

            String line;
            boolean readingRanges = true;

            while ((line = br.readLine()) != null) {

                // Remove all non-printable characters
                line = line.replaceAll("[^0-9\\-]", "").trim();

                if (line.isEmpty()) {
                    readingRanges = false;
                    continue;
                }

                if (readingRanges) {
                    String[] parts = line.split("-");

                    if (parts.length != 2) {
                        System.out.println("Invalid range skipped: " + line);
                        continue;
                    }

                    try {
                        BigInteger start = new BigInteger(parts[0]);
                        BigInteger end = new BigInteger(parts[1]);
                        freshRanges.add(new BigInteger[]{start, end});
                    } catch (Exception ex) {
                        System.out.println("Invalid range skipped: " + line);
                    }

                } else {
                    try {
                        BigInteger id = new BigInteger(line);
                        ingredientIds.add(id);
                    } catch (Exception ex) {
                        System.out.println("Invalid ID skipped: " + line);
                    }
                }
            }

        } catch (IOException e) {
            System.out.println("Error reading file: " + filePath);
            e.printStackTrace();
            return;
        }

        int freshCount = 0;

        for (BigInteger id : ingredientIds) {
            if (isFresh(id, freshRanges)) {
                freshCount++;
            }
        }

        System.out.println("Total fresh ingredient IDs: " + freshCount);
    }

    private static boolean isFresh(BigInteger id, List<BigInteger[]> ranges) {
        for (BigInteger[] range : ranges) {
            if (id.compareTo(range[0]) >= 0 && id.compareTo(range[1]) <= 0) {
                return true;
            }
        }
        return false;
    }
}
